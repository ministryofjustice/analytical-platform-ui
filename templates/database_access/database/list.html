{% extends "base.html" %}
{% load database_tags %}
{% block title %}Analytical Platform - Databases{% endblock title %}

{% block content %}
<div class="govuk-width-container">
    <h1 class="govuk-heading-xl">Databases</h1>
    <div class="govuk-form-group">
        <form id="filter-databases">
            <label class="govuk-label" for="sort">
                Filter by
              </label>
            <select class="govuk-select" id="sort" name="sort" onchange="document.getElementById('filter-databases').submit();">
            <option value="all"{% if "all" in request.GET.sort %} selected{% endif %}>All databases</option>
            <option value="my-databases"{% if "my-databases" in request.GET.sort %} selected{% endif %}>My database access</option>
            </select>
        </form>
      </div>

    {% if databases %}
        <table class="govuk-table">
            <thead class="govuk-table__head">
            <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header">Name</th>
                <th scope="col" class="govuk-table__header">Actions</th>
            </tr>
            </thead>
            <tbody class="govuk-table__body">
            {% for database in databases %}
                <tr class="govuk-table__row">
                <td class="govuk-table__cell">{% database_name database=database %}</td>
                <td class="govuk-table__cell">
                    <a href="{% database_url database=database %}" class="govuk-link">View</a>
                </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="govuk-body">No databases found.</p>
    {% endif %}
</div>

{% endblock content %}
